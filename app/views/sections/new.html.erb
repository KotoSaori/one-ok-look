<h1>部署管理</h1>
<table>

	<thead>
		<tr>
			<td colspan="10">部署</td>
			<td colspan="20">部署共有アドレス</td>
			<td colspan="2"></td>
		</tr>
	</thead>
	<tbody>
		<tr>
			<%= form_for @section do |f| %>
			<td colspan="10"><%= f.label :部署名 %><%= f.text_field :name %></td>
			<td colspan="20"><%= f.label :email %><%= f.text_field :email %></td>
			<td colspan="2"><%= f.submit "登録" %></td>
			<% end %>
		</tr>
		<tr>
		  <td colspan="10">部署</td>
			<td colspan="20">部署共有アドレス</td>
			<td colspan="2"></td>
		</tr>
		
		<% @sections.each do |section| %>
		<tr>
		    <td colspan="10"><%= text_field :section, :name, :id => "section_name" + section.id.to_s, :value => section.name, :readOnly => true %></td>
		    <td colspan="20"><%= text_field :section, :email, :id => "section_email" + section.id.to_s, :value => section.email, :readOnly => true %></td>
	    	<td colspan="2"><button class="edit_button" id="edit_button<%= section.id %>" data-id=<%= section.id %>>編集切替</button></td>
			  <td colspan="2"><button class="update_button" id="update_button<%= section.id %>" disabled data-id=<%= section.id %>>更新</button></td>
			  <td colspan="2"><button class="delete_button" id="delete_button<%= section.id %>" data-id=<%= section.id %>>削除</button></td>
    </tr>
		<% end %>
		
		
		<script>
		$('.edit_button').on('click', function(){
            var click =  $(this).data('id');
            var name_id = "section_name"+click;
            var edit_button_id = "edit_button"+click;
            var update_button_id = "update_button"+click;
            var delete_button_id = "delete_button"+click;
           
						if (document.getElementById(name_id).readOnly === true){
							// フィールド内のreadonly属性を削除
								document.getElementById(name_id).removeAttribute("readOnly");
								document.getElementById(name_id).style.background = "#EEEEEE";
								document.getElementById(name_id).style.color = "black";
						}else{
							// フィールド内のreadonly属性を設定
								document.getElementById(name_id).setAttribute("readOnly", true);
								document.getElementById(name_id).style.background = "White";
								document.getElementById(name_id).style.color = "black";
						}
						if (document.getElementById(name_id).readOnly === true){
								// 更新ボタンのdisabled属性を設定
								document.getElementById(update_button_id).setAttribute("disabled", true);
								document.getElementById(update_button_id).style.color = "White";
								// 削除ボタンのdisabled属性を削除
								document.getElementById(delete_button_id).removeAttribute("disabled");
								document.getElementById(delete_button_id).style.color = "black"
								
						}else{
								// 更新ボタンのdisabled属性を設定
								document.getElementById(update_button_id).removeAttribute("disabled");
								document.getElementById(update_button_id).style.color = "black";
							  // 削除ボタンのdisabled属性を設定
								document.getElementById(delete_button_id).setAttribute("disabled", true);
								document.getElementById(delete_button_id).style.color = "White";
						}
      });
      
      
      $('.edit_button').on('click', function(){
            var click =  $(this).data('id');
            var email_id = "section_email"+click
            // console.log(email_id)
						if (document.getElementById(email_id).readOnly === true){
							// readonly属性を削除
								document.getElementById(email_id).removeAttribute("readOnly");
								document.getElementById(email_id).style.background = "#EEEEEE";
								document.getElementById(email_id).style.color = "black";
						}else{
							// readonly属性を設定
								document.getElementById(email_id).setAttribute("readOnly", true);
								document.getElementById(email_id).style.background = "White";
								document.getElementById(email_id).style.color = "black";
						}
      });
      
		</script>
		
	</tbody>
</table>